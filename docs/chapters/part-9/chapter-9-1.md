# –ì–ª–∞–≤–∞ 9.1: –ú–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∫–æ–¥–æ–º, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –æ—Ç–∫–∞—Ç

## –í–≤–µ–¥–µ–Ω–∏–µ: –ü–æ—á–µ–º—É –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ —Ä–µ–≤–æ–ª—é—Ü–∏—è

–ü—Ä–µ–¥—Å—Ç–∞–≤—å: —Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª —Å–∞–π—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç. –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ß—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö?

**–°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–±–æ–ª—å –∏ —Å—Ç—Ä–∞–¥–∞–Ω–∏—è):**
1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—à—å SQL –∏–∑ phpMyAdmin
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—à—å –∫–æ–ª–ª–µ–≥–µ —Ñ–∞–π–ª
3. –û–Ω –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç, —É –Ω–µ–≥–æ –æ—à–∏–±–∫–∞ ‚Äî –≤–µ—Ä—Å–∏—è MySQL –¥—Ä—É–≥–∞—è
4. –ß–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é —Ç—ã –¥–æ–±–∞–≤–∏–ª –Ω–æ–≤–æ–µ –ø–æ–ª–µ –≤ —Ç–∞–±–ª–∏—Ü—É
5. –ö–æ–ª–ª–µ–≥–∞ –Ω–µ –∑–Ω–∞–µ—Ç –æ–± —ç—Ç–æ–º, —É –Ω–µ–≥–æ —Å–∞–π—Ç –ª–æ–º–∞–µ—Ç—Å—è
6. –¢—ã –ø—ã—Ç–∞–µ—à—å—Å—è –æ–±—ä—è—Å–Ω–∏—Ç—å –≤ —á–∞—Ç–µ: "–î–æ–±–∞–≤—å –ø–æ–ª–µ `avatar` –≤ —Ç–∞–±–ª–∏—Ü—É `users`, —Ç–∏–ø VARCHAR(255), –ø–æ—Å–ª–µ –ø–æ–ª—è `email`"
7. –û–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ —Ç—É–¥–∞, –≤—Å—ë –ª–æ–º–∞–µ—Ç—Å—è

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± (–º–∏–≥—Ä–∞—Ü–∏–∏):**
1. –ü–∏—à–µ—à—å –∫–æ–¥ –º–∏–≥—Ä–∞—Ü–∏–∏ –æ–¥–∏–Ω —Ä–∞–∑
2. –í—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç `php artisan migrate`
3. –ë–∞–∑–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ ‚Äî —ç—Ç–æ –∫–æ–¥ –≤ Git
5. –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—à—å —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É

**–ú–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ Git –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.** –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π, –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞.

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ –º–∏–≥—Ä–∞—Ü–∏–∏

**–ú–∏–≥—Ä–∞—Ü–∏—è** ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å PHP, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

–ö–∞–∂–¥–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ –º–µ—Ç–æ–¥–∞:
- `up()` ‚Äî —á—Ç–æ —Å–¥–µ–ª–∞—Ç—å (—Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É, –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ)
- `down()` ‚Äî –∫–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ

Laravel –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ `migrations`.

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –º–∏–≥—Ä–∞—Ü–∏–∏

```
–°–æ–∑–¥–∞–Ω–∏–µ ‚Üí –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞ ‚Üí –ó–∞–ø—É—Å–∫ ‚Üí –ë–î –∏–∑–º–µ–Ω–µ–Ω–∞ ‚Üí –ö–æ–º–º–∏—Ç –≤ Git ‚Üí –î—Ä—É–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç
                                                      ‚Üì
                                               –ü—Ä–æ–±–ª–µ–º–∞? –û—Ç–∫–∞—Ç!
```

---

## –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü–µ—Ä–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Å—Ç–æ–≤

```bash
php artisan make:migration create_posts_table
```

Laravel —Å–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª –≤ `database/migrations/`:
```
2024_01_29_120000_create_posts_table.php
```

**–í–∞–∂–Ω–æ:** –ü—Ä–µ—Ñ–∏–∫—Å —Å –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º ‚Äî —ç—Ç–æ timestamp. –û–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

```php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('posts', function (Blueprint $table) {
            $table->id(); // BIGINT UNSIGNED, PRIMARY KEY, AUTO_INCREMENT
            $table->string('title'); // VARCHAR(255)
            $table->text('content'); // TEXT
            $table->timestamps(); // created_at, updated_at
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('posts');
    }
};
```

### –†–∞–∑–±–æ—Ä –∫–æ–¥–∞

**`Schema::create()`** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã

**`Blueprint $table`** ‚Äî –æ–±—ä–µ–∫—Ç-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ç–∞–±–ª–∏—Ü—ã, —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–µ–π

**`$table->id()`** ‚Äî —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª–µ `id`, —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç SQL:
```sql
id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY
```

**`$table->timestamps()`** ‚Äî —Å–æ–∑–¥–∞—ë—Ç –¥–≤–∞ –ø–æ–ª—è:
```sql
created_at TIMESTAMP NULL
updated_at TIMESTAMP NULL
```

Laravel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –∏—Ö –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏.

---

## –¢–∏–ø—ã –ø–æ–ª–µ–π –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö

### –ß–∏—Å–ª–æ–≤—ã–µ —Ç–∏–ø—ã

```php
$table->integer('views'); // INT
$table->bigInteger('downloads'); // BIGINT
$table->tinyInteger('status'); // TINYINT (0-255)
$table->smallInteger('order'); // SMALLINT
$table->unsignedBigInteger('user_id'); // BIGINT UNSIGNED (–¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π)

$table->decimal('price', 8, 2); // DECIMAL(8,2) ‚Äî –¥–ª—è —Ü–µ–Ω
$table->float('rating', 8, 2); // FLOAT
$table->double('latitude', 10, 6); // DOUBLE ‚Äî –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
```

**–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –î–ª—è —Ü–µ–Ω –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `decimal`, –Ω–µ `float`! Float –¥–∞—ë—Ç –æ—à–∏–±–∫–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è.

### –°—Ç—Ä–æ–∫–æ–≤—ã–µ —Ç–∏–ø—ã

```php
$table->string('name'); // VARCHAR(255)
$table->string('phone', 20); // VARCHAR(20)
$table->text('description'); // TEXT (–¥–æ 65,535 —Å–∏–º–≤–æ–ª–æ–≤)
$table->longText('content'); // LONGTEXT (–¥–æ 4GB)
$table->char('code', 6); // CHAR(6) ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª–∏–Ω–∞
```

**–ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- `string` ‚Äî –∏–º–µ–Ω–∞, email, –∫–æ—Ä–æ—Ç–∫–∏–µ —Ç–µ–∫—Å—Ç—ã
- `text` ‚Äî –æ–ø–∏—Å–∞–Ω–∏—è, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `longText` ‚Äî —Å—Ç–∞—Ç—å–∏, –±–æ–ª—å—à–∏–µ —Ç–µ–∫—Å—Ç—ã
- `char` ‚Äî –∫–æ–¥—ã —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã (–ø—Ä–æ–º–æ–∫–æ–¥—ã, ISBN)

### –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è

```php
$table->date('birth_date'); // DATE
$table->time('start_time'); // TIME
$table->datetime('event_at'); // DATETIME
$table->timestamp('published_at'); // TIMESTAMP (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å timezone)
$table->timestamps(); // created_at + updated_at
$table->softDeletes(); // deleted_at (–¥–ª—è –º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è)
```

### –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ

```php
$table->boolean('is_active'); // TINYINT(1)
$table->enum('status', ['draft', 'published', 'archived']); // ENUM
$table->json('meta'); // JSON (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤/–æ–±—ä–µ–∫—Ç–æ–≤)
$table->uuid('id'); // CHAR(36) ‚Äî –¥–ª—è UUID
$table->ipAddress('visitor_ip'); // VARCHAR(45) ‚Äî –¥–ª—è IPv4/IPv6
```

### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ø–æ–ª–µ–π

```php
$table->string('email')->nullable(); // –ú–æ–∂–µ—Ç –±—ã—Ç—å NULL
$table->string('slug')->unique(); // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
$table->integer('views')->default(0); // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
$table->timestamp('published_at')->useCurrent(); // –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
$table->string('title')->comment('–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Å—Ç–∞'); // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –ë–î

// –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å
$table->string('email')->unique()->nullable(false);
```

---

## –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```php
Schema::create('users', function (Blueprint $table) {
    $table->id();
    $table->string('name');
    $table->string('email')->unique();
    $table->string('password');
    $table->string('avatar')->nullable();
    $table->enum('role', ['user', 'admin'])->default('user');
    $table->boolean('is_active')->default(true);
    $table->timestamp('email_verified_at')->nullable();
    $table->rememberToken(); // –î–ª—è "–∑–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è"
    $table->timestamps();
    $table->softDeletes(); // –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
    
    // –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
    $table->index('email');
});
```

**`rememberToken()`** ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è Laravel –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, VARCHAR(100).

**`softDeletes()`** ‚Äî –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞—Ç—É –≤ `deleted_at`.

---

## –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ (Foreign Keys)

### –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```php
Schema::create('posts', function (Blueprint $table) {
    $table->id();
    $table->foreignId('user_id')->constrained();
    $table->string('title');
    $table->text('content');
    $table->timestamps();
});
```

**`foreignId('user_id')->constrained()`** –¥–µ–ª–∞–µ—Ç:
1. –°–æ–∑–¥–∞—ë—Ç –ø–æ–ª–µ `user_id` —Ç–∏–ø–∞ BIGINT UNSIGNED
2. –°–æ–∑–¥–∞—ë—Ç –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `users`, –ø–æ–ª–µ `id`
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–º—è —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª—è (—É–±–∏—Ä–∞–µ—Ç `_id`, –¥–æ–±–∞–≤–ª—è–µ—Ç `s`)

### –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å

```php
$table->foreignId('author_id')
    ->constrained('users') // –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º —Ç–∞–±–ª–∏—Ü—É
    ->onUpdate('cascade') // –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å –≤–µ–∑–¥–µ
    ->onDelete('cascade'); // –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –ø–æ—Å—Ç—ã
```

**–í–∞—Ä–∏–∞–Ω—Ç—ã `onDelete`:**
- `cascade` ‚Äî —É–¥–∞–ª–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- `set null` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NULL (—Ç—Ä–µ–±—É–µ—Ç `nullable()`)
- `restrict` ‚Äî –∑–∞–ø—Ä–µ—Ç–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- `no action` ‚Äî –∫–∞–∫ restrict

### –ü—Ä–∏–º–µ—Ä: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç–∞–º

```php
Schema::create('comments', function (Blueprint $table) {
    $table->id();
    $table->foreignId('post_id')->constrained()->onDelete('cascade');
    $table->foreignId('user_id')->constrained()->onDelete('cascade');
    $table->text('content');
    $table->timestamps();
});
```

**–õ–æ–≥–∏–∫–∞:** –ï—Å–ª–∏ –ø–æ—Å—Ç —É–¥–∞–ª—ë–Ω ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª—ë–Ω ‚Äî —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.

---

## –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
php artisan migrate

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –±–∞—Ç—á –º–∏–≥—Ä–∞—Ü–∏–π
php artisan migrate:rollback

# –û—Ç–∫–∞—Ç–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ç—á–µ–π
php artisan migrate:rollback --step=2

# –û—Ç–∫–∞—Ç–∏—Ç—å –í–°–ï –º–∏–≥—Ä–∞—Ü–∏–∏
php artisan migrate:reset

# –û—Ç–∫–∞—Ç–∏—Ç—å –≤—Å—ë –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ (fresh start)
php artisan migrate:refresh

# –¢–æ –∂–µ —Å–∞–º–æ–µ + –∑–∞–ø—É—Å—Ç–∏—Ç—å seeders
php artisan migrate:refresh --seed

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ (–±—ã—Å—Ç—Ä–µ–µ refresh)
php artisan migrate:fresh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
php artisan migrate:status
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ

Laravel —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—É `migrations`:

| id | migration | batch |
|----|-----------|-------|
| 1 | 2024_01_01_create_users_table | 1 |
| 2 | 2024_01_02_create_posts_table | 1 |
| 3 | 2024_01_15_add_avatar_to_users | 2 |

**Batch** ‚Äî –≥—Ä—É–ø–ø–∞ –º–∏–≥—Ä–∞—Ü–∏–π, –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π. Rollback –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –≤–µ—Å—å –±–∞—Ç—á.

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

```bash
# 1. –°–æ–∑–¥–∞–ª –º–∏–≥—Ä–∞—Ü–∏—é
php artisan make:migration create_categories_table

# 2. –ù–∞–ø–∏—Å–∞–ª –∫–æ–¥ –º–∏–≥—Ä–∞—Ü–∏–∏
# (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—à—å —Ñ–∞–π–ª)

# 3. –ó–∞–ø—É—Å—Ç–∏–ª
php artisan migrate

# 4. –ü–æ–Ω—è–ª, —á—Ç–æ –æ—à–∏–±–∫–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
php artisan migrate:rollback

# 5. –ò—Å–ø—Ä–∞–≤–∏–ª –∫–æ–¥ –º–∏–≥—Ä–∞—Ü–∏–∏

# 6. –ó–∞–ø—É—Å—Ç–∏–ª —Å–Ω–æ–≤–∞
php artisan migrate
```

---

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

**–ù–ò–ö–û–ì–î–ê –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Å—Ç–∞—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∏—Ö –∫–æ–º–º–∏—Ç–∞ –≤ Git!**

```bash
php artisan make:migration add_avatar_to_users_table
```

```php
public function up(): void
{
    Schema::table('users', function (Blueprint $table) {
        $table->string('avatar')->nullable()->after('email');
    });
}

public function down(): void
{
    Schema::table('users', function (Blueprint $table) {
        $table->dropColumn('avatar');
    });
}
```

**`after('email')`** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –ø–æ—Å–ª–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞.

### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞

```php
use Illuminate\Database\Schema\Blueprint;

// –î–æ–±–∞–≤—å –≤ composer.json:
// "doctrine/dbal": "^3.0"

public function up(): void
{
    Schema::table('posts', function (Blueprint $table) {
        $table->renameColumn('body', 'content');
    });
}
```

**–í–∞–∂–Ω–æ:** –î–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –Ω—É–∂–µ–Ω –ø–∞–∫–µ—Ç `doctrine/dbal`:
```bash
composer require doctrine/dbal
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å—Ç–æ–ª–±—Ü–∞

```php
public function up(): void
{
    Schema::table('posts', function (Blueprint $table) {
        $table->text('content')->change(); // –ë—ã–ª–æ string, —Å—Ç–∞–ª–æ text
    });
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞

```php
public function up(): void
{
    Schema::table('users', function (Blueprint $table) {
        $table->dropColumn('old_field');
        
        // –£–¥–∞–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–ª–±—Ü–æ–≤
        $table->dropColumn(['field1', 'field2', 'field3']);
    });
}

public function down(): void
{
    Schema::table('users', function (Blueprint $table) {
        $table->string('old_field')->nullable();
    });
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞

```php
$table->dropForeign(['user_id']); // –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Å—Ç–æ–ª–±—Ü–∞
$table->dropForeign('posts_user_id_foreign'); // –ü–æ –∏–º–µ–Ω–∏ constraint
```

### –†–∞–±–æ—Ç–∞ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏

```php
// –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å
$table->index('email');
$table->index(['user_id', 'created_at']); // –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å

// –£–¥–∞–ª–∏—Ç—å –∏–Ω–¥–µ–∫—Å
$table->dropIndex(['email']);
$table->dropUnique(['email']); // –£–¥–∞–ª–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å

// –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å
$table->renameIndex('old_index_name', 'new_index_name');
```

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë–ª–æ–≥ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏

```php
// 1. –ú–∏–≥—Ä–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
Schema::create('categories', function (Blueprint $table) {
    $table->id();
    $table->string('name')->unique();
    $table->string('slug')->unique();
    $table->timestamps();
});

// 2. –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤
Schema::create('posts', function (Blueprint $table) {
    $table->id();
    $table->foreignId('user_id')->constrained()->onDelete('cascade');
    $table->foreignId('category_id')->constrained()->onDelete('cascade');
    $table->string('title');
    $table->string('slug')->unique();
    $table->text('excerpt')->nullable();
    $table->longText('content');
    $table->enum('status', ['draft', 'published'])->default('draft');
    $table->integer('views')->default(0);
    $table->timestamp('published_at')->nullable();
    $table->timestamps();
    $table->softDeletes();
    
    $table->index(['status', 'published_at']); // –î–ª—è —Å–ø–∏—Å–∫–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö
});
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Many-to-Many (–ø–æ—Å—Ç—ã –∏ —Ç–µ–≥–∏)

```php
// 1. –¢–∞–±–ª–∏—Ü–∞ —Ç–µ–≥–æ–≤
Schema::create('tags', function (Blueprint $table) {
    $table->id();
    $table->string('name')->unique();
    $table->timestamps();
});

// 2. Pivot-—Ç–∞–±–ª–∏—Ü–∞ (—Å–≤—è–∑—å –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º)
Schema::create('post_tag', function (Blueprint $table) {
    $table->foreignId('post_id')->constrained()->onDelete('cascade');
    $table->foreignId('tag_id')->constrained()->onDelete('cascade');
    
    $table->primary(['post_id', 'tag_id']); // –°–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
});
```

**Naming convention:** –ò–º–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ: `post_tag`, –Ω–µ `posts_tags`.

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–µ —Å–≤—è–∑–∏ (–ª–∞–π–∫–∏ –∫ –ø–æ—Å—Ç–∞–º –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º)

```php
Schema::create('likes', function (Blueprint $table) {
    $table->id();
    $table->foreignId('user_id')->constrained()->onDelete('cascade');
    $table->morphs('likeable'); // –°–æ–∑–¥–∞—ë—Ç likeable_type –∏ likeable_id
    $table->timestamps();
    
    $table->unique(['user_id', 'likeable_type', 'likeable_id']);
});
```

**`morphs('likeable')`** —Å–æ–∑–¥–∞—ë—Ç:
- `likeable_type` ‚Äî VARCHAR(255) (–Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏: 'App\Models\Post')
- `likeable_id` ‚Äî BIGINT UNSIGNED (ID –∑–∞–ø–∏—Å–∏)

---

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ DO (–î–µ–ª–∞–π —Ç–∞–∫)

1. **–û–¥–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è ‚Äî –æ–¥–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ**
   ```bash
   php artisan make:migration add_status_to_posts_table
   # –ù–µ: update_posts_table_with_everything
   ```

2. **–í—Å–µ–≥–¥–∞ –ø–∏—à–∏ `down()`**
   ```php
   public function down(): void
   {
       Schema::dropIfExists('posts');
       // –ù–µ –æ—Å—Ç–∞–≤–ª—è–π –ø—É—Å—Ç—ã–º!
   }
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π `nullable()` –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π**
   ```php
   // –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–ª—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É —Å –¥–∞–Ω–Ω—ã–º–∏
   $table->string('avatar')->nullable();
   ```

4. **Foreign keys —Å cascade**
   ```php
   $table->foreignId('user_id')
       ->constrained()
       ->onDelete('cascade');
   ```

5. **–ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª–µ–π**
   ```php
   $table->index('email');
   $table->index(['user_id', 'created_at']);
   ```

### ‚ùå DON'T (–ù–µ –¥–µ–ª–∞–π —Ç–∞–∫)

1. **–ù–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Å—Ç–∞—Ä—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏**
   - –ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è —É–∂–µ –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ ‚Äî —Ç–æ–ª—å–∫–æ –Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

2. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π `float` –¥–ª—è –¥–µ–Ω–µ–≥**
   ```php
   $table->decimal('price', 8, 2); // ‚úÖ
   $table->float('price'); // ‚ùå
   ```

3. **–ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ –æ—Ç–∫–∞—Ç**
   ```php
   // ‚ùå –ü–ª–æ—Ö–æ
   public function down(): void
   {
       //
   }
   
   // ‚úÖ –•–æ—Ä–æ—à–æ
   public function down(): void
   {
       Schema::dropIfExists('posts');
   }
   ```

4. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π Raw SQL –±–µ–∑ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏**
   ```php
   DB::statement('ALTER TABLE...'); // ‚ùå –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ Blueprint –Ω–µ —É–º–µ–µ—Ç
   ```

---

## –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞: "SQLSTATE[HY000]: General error: 1005"

**–ü—Ä–∏—á–∏–Ω–∞:** –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—è–¥–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–π. –¢–∞–±–ª–∏—Ü–∞ `users` –¥–æ–ª–∂–Ω–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –î–û `posts`.

### –û—à–∏–±–∫–∞: "Syntax error or access violation: 1071 Specified key was too long"

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ MySQL –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–ª–∏–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è UTF8MB4.

**–†–µ—à–µ–Ω–∏–µ:** –í `AppServiceProvider`:
```php
use Illuminate\Support\Facades\Schema;

public function boot(): void
{
    Schema::defaultStringLength(191);
}
```

### –û—à–∏–±–∫–∞: "Nothing to migrate"

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–∏–≥—Ä–∞—Ü–∏—è —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:** 
```bash
php artisan migrate:status # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
php artisan migrate:rollback # –û—Ç–∫–∞—Ç–∏—Ç—å
php artisan migrate # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
```

---

## –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

1. **–ü—Ä–æ–≤–µ—Ä—å `down()` –º–µ—Ç–æ–¥—ã** ‚Äî –º–æ–∂–µ—à—å –ª–∏ –æ—Ç–∫–∞—Ç–∏—Ç—å?
2. **–¢–µ—Å—Ç–∏—Ä—É–π –Ω–∞ –∫–æ–ø–∏–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –ë–î** ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
3. **Backup –±–∞–∑—ã** ‚Äî –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
4. **–ß–∏—Ç–∞–π SQL** ‚Äî `php artisan migrate --pretend` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç SQL –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π

```bash
# 1. –°–æ–∑–¥–∞–π backup
mysqldump -u user -p database > backup.sql

# 2. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
php artisan migrate --pretend

# 3. –ó–∞–ø—É—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
php artisan migrate --force # --force –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

# 4. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
php artisan migrate:rollback
mysql -u user -p database < backup.sql
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–µ–∑ –¥–∞—É–Ω—Ç–∞–π–º–∞

–î–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü (–º–∏–ª–ª–∏–æ–Ω—ã –∑–∞–ø–∏—Å–µ–π) –∏—Å–ø–æ–ª—å–∑—É–π:

1. **–î–æ–±–∞–≤—å –ø–æ–ª–µ –∫–∞–∫ nullable**
2. **–ó–∞–ø–æ–ª–Ω–∏ –¥–∞–Ω–Ω—ã–µ —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ–π**
3. **–ü–æ—Ç–æ–º —Å–¥–µ–ª–∞–π –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º**

```php
// –ú–∏–≥—Ä–∞—Ü–∏—è 1: –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–µ
$table->string('new_field')->nullable();

// –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
// –ú–∏–≥—Ä–∞—Ü–∏—è 2: –î–µ–ª–∞–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º
$table->string('new_field')->nullable(false)->change();
```

---

## –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –°–æ–∑–¥–∞–π —Å–∏—Å—Ç–µ–º—É –±–ª–æ–≥–∞

–°–æ–∑–¥–∞–π –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è:
1. –¢–∞–±–ª–∏—Ü–∞ `users` (id, name, email, password, timestamps)
2. –¢–∞–±–ª–∏—Ü–∞ `posts` (id, user_id, title, slug, content, status, published_at, timestamps, softDeletes)
3. –¢–∞–±–ª–∏—Ü–∞ `comments` (id, post_id, user_id, content, timestamps)

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ —Å –∫–∞—Å–∫–∞–¥–Ω—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞ email
- –ò–Ω–¥–µ–∫—Å –Ω–∞ slug
- Enum –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞: draft, published, archived

<details>
<summary>–†–µ—à–µ–Ω–∏–µ</summary>

```php
// 1. Users
Schema::create('users', function (Blueprint $table) {
    $table->id();
    $table->string('name');
    $table->string('email')->unique();
    $table->string('password');
    $table->timestamps();
});

// 2. Posts
Schema::create('posts', function (Blueprint $table) {
    $table->id();
    $table->foreignId('user_id')->constrained()->onDelete('cascade');
    $table->string('title');
    $table->string('slug')->unique();
    $table->longText('content');
    $table->enum('status', ['draft', 'published', 'archived'])->default('draft');
    $table->timestamp('published_at')->nullable();
    $table->timestamps();
    $table->softDeletes();
    
    $table->index('slug');
});

// 3. Comments
Schema::create('comments', function (Blueprint $table) {
    $table->id();
    $table->foreignId('post_id')->constrained()->onDelete('cascade');
    $table->foreignId('user_id')->constrained()->onDelete('cascade');
    $table->text('content');
    $table->timestamps();
});
```
</details>

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –î–æ–±–∞–≤—å —Å–∏—Å—Ç–µ–º—É —Ç–µ–≥–æ–≤

–î–æ–±–∞–≤—å –∫ –±–ª–æ–≥—É –∏–∑ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è 1:
1. –¢–∞–±–ª–∏—Ü—É `tags`
2. Pivot-—Ç–∞–±–ª–∏—Ü—É –¥–ª—è —Å–≤—è–∑–∏ many-to-many
3. –£ –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ —Ç–µ–≥–æ–≤, —Ç–µ–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å —É –º–Ω–æ–≥–∏—Ö –ø–æ—Å—Ç–æ–≤

<details>
<summary>–†–µ—à–µ–Ω–∏–µ</summary>

```php
// Tags
Schema::create('tags', function (Blueprint $table) {
    $table->id();
    $table->string('name')->unique();
    $table->string('slug')->unique();
    $table->timestamps();
});

// Pivot table
Schema::create('post_tag', function (Blueprint $table) {
    $table->foreignId('post_id')->constrained()->onDelete('cascade');
    $table->foreignId('tag_id')->constrained()->onDelete('cascade');
    
    $table->primary(['post_id', 'tag_id']);
    $table->timestamps(); // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –∑–Ω–∞—Ç—å –∫–æ–≥–¥–∞ —Ç–µ–≥ –¥–æ–±–∞–≤–ª–µ–Ω
});
```
</details>

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–ö —Ç–∞–±–ª–∏—Ü–µ `users` –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
- –ü–æ–ª–µ `avatar` (nullable, –ø–æ—Å–ª–µ email)
- –ü–æ–ª–µ `bio` (text, nullable)
- –ü–æ–ª–µ `is_verified` (boolean, default false)

–°–æ–∑–¥–∞–π –º–∏–≥—Ä–∞—Ü–∏—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º `down()` –º–µ—Ç–æ–¥–æ–º.

<details>
<summary>–†–µ—à–µ–Ω–∏–µ</summary>

```php
public function up(): void
{
    Schema::table('users', function (Blueprint $table) {
        $table->string('avatar')->nullable()->after('email');
        $table->text('bio')->nullable();
        $table->boolean('is_verified')->default(false);
    });
}

public function down(): void
{
    Schema::table('users', function (Blueprint $table) {
        $table->dropColumn(['avatar', 'bio', 'is_verified']);
    });
}
```
</details>

---

## –ß–µ–∫-–ª–∏—Å—Ç –∑–Ω–∞–Ω–∏–π

–ü–æ—Å–ª–µ —ç—Ç–æ–π –≥–ª–∞–≤—ã —Ç—ã –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å:

- [ ] –°–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ artisan
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –ø–æ–ª–µ–π (string, text, integer, timestamps)
- [ ] –°–æ–∑–¥–∞–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ —Å `foreignId()->constrained()`
- [ ] –ü–æ–Ω–∏–º–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É `migrate`, `rollback`, `refresh`, `fresh`
- [ ] –î–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- [ ] –£–¥–∞–ª—è—Ç—å –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å –ø–æ–ª—è
- [ ] –°–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- [ ] –ü–∏—Å–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ `down()` –º–µ—Ç–æ–¥—ã
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã: nullable, unique, default
- [ ] –°–æ–∑–¥–∞–≤–∞—Ç—å many-to-many —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ pivot-—Ç–∞–±–ª–∏—Ü—ã

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ **9.2: Eloquent —Å–≤—è–∑–∏** –º—ã –Ω–∞—É—á–∏–º—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª–∏. –¢—ã —É–∑–Ω–∞–µ—à—å:
- –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤—è–∑—å `hasMany`, `belongsTo`
- –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π
- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å many-to-many –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è SQL
- –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–µ —Å–≤—è–∑–∏

**–ú–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –±–∞–∑–∞. Eloquent ‚Äî —ç—Ç–æ –º–∞–≥–∏—è.**

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Laravel Migrations Documentation](https://laravel.com/docs/migrations)
- [Available Column Types](https://laravel.com/docs/migrations#available-column-types)
- [Database Seeding](https://laravel.com/docs/seeding) ‚Äî —Å–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞

---

**–°–æ–≤–µ—Ç –Ω–∞ –∫–æ–Ω–µ—Ü:** –ö–æ–º–º–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Git –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î ‚Äî —ç—Ç–æ –∫–æ–¥, —Ö—Ä–∞–Ω–∏ –µ—ë –∫–∞–∫ –∫–æ–¥. –¢–≤–æ–∏ –∫–æ–ª–ª–µ–≥–∏ —Å–∫–∞–∂—É—Ç —Å–ø–∞—Å–∏–±–æ. üöÄ